pipeline {
	agent any

	environment{
		MY_ENV_VAR = 'Ambiente Alex 1'
	}

	stages {
		stage('Checkout'){
			steps{
				script{
					//clone GIT repository
					def gitRepoUrl = 'https://github.com/axanglo/TestDotNet.git'

					checkout([$class: 'GitSCM',
						branches:[[name:'*/main']],
						userRemoteConfigs:[[url:gitRepoUrl]],
						extensions:[[$class:'CleanBeforeCheckout'], [$class:'CloneOption', noTags:false, shallow:true, depth:1]]
					])
				}
			}
		}

		stage('Build'){
			steps{
					sh 'echo "Build step on my ENV: "$MY_ENV_VAR""'
			}
		}

		stage('Deploy'){
			steps{
				sh '''
					ls
					echo ''Deploy step''
				'''
			}
		}
	}

	post{
		success{
			echo 'Pipeline success'
		}
		failure{
			echo 'Pipeline failure'
		}
	}
}